Adding permant mac addresses  using netplan + networkd
networkctl status red
```
Network File: /run/systemd/network/10-netplan-red.network
```
That file is generated by netplan.
We will **not modify it**.

We will only add **one drop-in file** that adds a single neighbor.
---

### 1️⃣ Create drop-in directory (same base name)

sudo mkdir -p /etc/systemd/network/10-netplan-red.network.d
### 2️⃣ Create ONE small file

vim /etc/systemd/network/10-netplan-red.network.d/10-neighbor.conf

```
[Neighbor]
Address=192.0.2.252
LinkLayerAddress=24:8a:07:5b:14:e0
```
### 3️⃣ Apply it

sudo networkctl reload
sudo networkctl reconfigure red

### 4️⃣ Verify

ip neigh show dev rednetworkctl status red

192.0.2.252 lladdr 24:8a:07:5b:14:e0 PERMANENT

```bash
networkctl status red
```

You should see something like:

```
Drop-in File: /etc/systemd/network/10-netplan-red.network.d/10-neighbor.conf
```

That confirms everything is layered correctly.

networkctl status red
	Link File: /run/systemd/network/10-netplan-red.link
       Network File: /run/systemd/network/10-netplan-red.network
                      └─/etc/systemd/network/10-netplan-red.network.d/10-neighbor.conf

--- configure network dispatcher
mkdir -p /etc/systemd/system/systemd-networkd-wait-online.service.d/ 

tee /etc/systemd/system/systemd-networkd-wait-online.service.d/override.conf <<EOF
[Service]
ExecStart=
ExecStart=/lib/systemd/systemd-networkd-wait-online --any -o routable -i eth0 -i red -i black --timeout=30
EOF

systemctl daemon-reload
systemctl restart systemd-networkd-wait-online.service
systemctl status systemd-networkd-wait-online.service


--network dispatcher for flow steering
systemctl enable networkd-dispatcher
systemctl start networkd-dispatcher
mkdir -p /etc/networkd-dispatcher/routable.d
vim /etc/networkd-dispatcher/routable.d/10-flow-steering
